<!DOCTYPE html>
<html>
	<head>
		<title>Przykład wykresu Chart.js</title>
		<link rel="stylesheet" href="style.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
		<!-- Chart.js -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.js" integrity="sha512-L6yov5P1r9QnZX2ZRiq+XBLsm1GQ38zfSDJ6gy3pKmPCqkWvK2nz8Ojlju9q36+zOsMmMB+hYgGrJtJWo4Gy/w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.umd.js" integrity="sha512-CMF3tQtjOoOJoOKlsS7/2loJlkyctwzSoDK/S40iAB+MqWSaf50uObGQSk5Ny/gfRhRCjNLvoxuCvdnERU4WGg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/helpers.js" integrity="sha512-BQJ3AP+pvkpSDEexjv6OYwGVCVIFo507d09S8pFPTp63+d7YZDrvjoB+4cSPTThQVfQjP6yybIZ6P29ZQGcPvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
		<!-- jQuery -->
		<script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
	</head>
		<body>
			<script src="data.js"></script>
			<header>
				<h1>Projekt</h1>
				<p>Tekst dolny</p>
			</header>
			<div class="container">
				<div class="row">
					<aside class="col-2">
						<h2>Spis treści</h2>
						<ul>
							<li><a href="">Wykres 1</a></li>
							<li><a href="">Wykres 2</a></li>
							<li><a href="">Wykres 3</a></li>
							<li><a href="">Wykres 4</a></li>
							<li><a href="">Wykres 5</a></li>
							<li><a href="">Wykres 6</a></li>
							<li><a href="">Wykres 7</a></li>
							<li><a href="">Wykres 8</a></li>
							<li><a href="">Wykres 9</a></li>
							<li><a href="">Wykres 10</a></li>
						</ul>
					</aside>
					<main class="col-10">
						<canvas class="chart-js" id="myChart"></canvas>
						<div class="actions-bar">
							<button id="all-sex">Pokaż wszystko</button>
							<button id="man-sex">Pokaż seks chłopy</button>
							<button id="woman-sex">Pokaż seks baby</button>
						</div>
						<script>
							
							// wyciąganie danych z pliku (data.js)
							let yes = 0
							let no = 0
							let yes_woman = 0
							let no_woman = 0
							let yes_man = 0
							let no_man = 0
							
							for (let i = 0; i < data.length; i++) {
								if (data[i].seks) {
									yes++
									if (data[i].płeć == "m")
										yes_man++
									else
										yes_woman++
								} else {
									no++
									if (data[i].płeć == "m")
										no_man++
									else
										no_woman++
								}
							}
							
							// tworzenie wykresu
							var ctx = document.getElementById('myChart').getContext('2d');
							var myChart = new Chart(ctx, {
								type: 'bar',
								data: {
									labels: ['Jeszcze jak', 'Brak seks'],
									datasets: [{
										label: 'Seks?',
										data: [yes, no],
										backgroundColor: '#00800033',
										borderColor: '#008000ff',
										borderWidth: 1
									}]
								},
								options: {
									scales: {
										y: {
											beginAtZero: true,
											max: 25
										}
									}
								}
							});
							
							// funkcje przycisków akcji
							function all_sex () {
								myChart.data.datasets[0].data[0] = yes
								myChart.data.datasets[0].data[1] = no
								myChart.data.datasets[0].backgroundColor = '#00800033'
								myChart.data.datasets[0].borderColor = '#008000ff'
								myChart.update()
							}
							function man_sex () {
								myChart.data.datasets[0].data[0] = yes_man
								myChart.data.datasets[0].data[1] = no_man
								myChart.data.datasets[0].backgroundColor = '#0000ff33'
								myChart.data.datasets[0].borderColor = '#0000ffff'
								myChart.update()
							}
							function woman_sex () {
								myChart.data.datasets[0].data[0] = yes_woman
								myChart.data.datasets[0].data[1] = no_woman
								myChart.data.datasets[0].backgroundColor = '#ffc0cb33'
								myChart.data.datasets[0].borderColor = '#ffc0cbff'
								myChart.update()
							}
							
							// eventListener do każdego przycisku
							document.getElementById("all-sex").addEventListener("click", all_sex);
							document.getElementById("man-sex").addEventListener("click", man_sex);
							document.getElementById("woman-sex").addEventListener("click", woman_sex);
						</script>
					</main>
				</div>
			</div>
			<footer>
				<p>seks</p>
			</footer>
		</body>
</html>